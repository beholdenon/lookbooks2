<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bloomingdale's</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <link rel="stylesheet" type="text/css" href="./css/styles.css" />
</head>

<body>
    <div class="split-template">
        <main>
            <nav>
                <ul></ul>
            </nav>
            <div class="content">
                <div class="outer">
                    <article>
                        <div class="photo-container">
                            <div>
                                <div class="caro">
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-container">
                            <div class="inner">
                                <div class="cdiv">
                                    <h2>Section One</h2>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tempor convallis purus et porttitor. Aliquam erat volutpat. Morbi a diam magna. Etiam ac interdum diam. Praesent viverra, tellus sit amet varius suscipit,
                                        justo enim suscipit sem, eget dapibus dolor libero in nisi. Cras vitae tortor ac risus accumsan hendrerit sit amet ut metus.</p>
                                    <button>Shop Now</button>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                <div class="outer">
                    <article>
                        <div class="photo-container">
                            <div>
                                <div class="caro">
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-container">
                            <div class="inner">
                                <div class="cdiv">
                                    <h2>Section Two</h2>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tempor convallis purus et porttitor. Aliquam erat volutpat. Morbi a diam magna. Etiam ac interdum diam. Praesent viverra, tellus sit amet varius suscipit,
                                        justo enim suscipit sem, eget dapibus dolor libero in nisi. Cras vitae tortor ac risus accumsan hendrerit sit amet ut metus.</p>
                                    <button>Shop Now</button>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                <div class="outer">
                    <article>
                        <div class="photo-container">
                            <div>
                                <div class="caro">
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-container">
                            <div class="inner">
                                <div class="cdiv">
                                    <h2>Section Three</h2>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tempor convallis purus et porttitor. Aliquam erat volutpat. Morbi a diam magna. Etiam ac interdum diam. Praesent viverra, tellus sit amet varius suscipit,
                                        justo enim suscipit sem, eget dapibus dolor libero in nisi. Cras vitae tortor ac risus accumsan hendrerit sit amet ut metus.</p>
                                    <button>Shop Now</button>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                <div class="outer">
                    <article class="app-product  app-product--desktop">
                        <div class="photo-container">
                            <div>
                                <div class="caro">
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                    <div>
                                        <img src="https://via.placeholder.com/804x1059">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-container">
                            <div class="inner">
                                <div class="cdiv">
                                    <h2>Section Four</h2>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tempor convallis purus et porttitor. Aliquam erat volutpat. Morbi a diam magna. Etiam ac interdum diam. Praesent viverra, tellus sit amet varius suscipit,
                                        justo enim suscipit sem, eget dapibus dolor libero in nisi. Cras vitae tortor ac risus accumsan hendrerit sit amet ut metus.</p>
                                    <button>Shop Now</button>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </main>
    </div>
    <script src="./js/app.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

    <script>
        /*!
         * jQuery Mousewheel 3.1.13
         *
         * Copyright 2015 jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        ! function(a) {
            "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof exports ? module.exports = a : a(jQuery)
        }(function(a) {
            function b(b) {
                var g = b || window.event,
                    h = i.call(arguments, 1),
                    j = 0,
                    l = 0,
                    m = 0,
                    n = 0,
                    o = 0,
                    p = 0;
                if (b = a.event.fix(g), b.type = "mousewheel", "detail" in g && (m = -1 * g.detail), "wheelDelta" in g && (m = g.wheelDelta), "wheelDeltaY" in g && (m = g.wheelDeltaY), "wheelDeltaX" in g && (l = -1 * g.wheelDeltaX), "axis" in g && g.axis === g.HORIZONTAL_AXIS && (l = -1 * m, m = 0), j = 0 === m ? l : m, "deltaY" in g && (m = -1 * g.deltaY, j = m), "deltaX" in g && (l = g.deltaX, 0 === m && (j = -1 * l)), 0 !== m || 0 !== l) {
                    if (1 === g.deltaMode) {
                        var q = a.data(this, "mousewheel-line-height");
                        j *= q, m *= q, l *= q
                    } else if (2 === g.deltaMode) {
                        var r = a.data(this, "mousewheel-page-height");
                        j *= r, m *= r, l *= r
                    }
                    if (n = Math.max(Math.abs(m), Math.abs(l)), (!f || f > n) && (f = n, d(g, n) && (f /= 40)), d(g, n) && (j /= 40, l /= 40, m /= 40), j = Math[j >= 1 ? "floor" : "ceil"](j / f), l = Math[l >= 1 ? "floor" : "ceil"](l / f), m = Math[m >= 1 ? "floor" : "ceil"](m / f), k.settings.normalizeOffset && this.getBoundingClientRect) {
                        var s = this.getBoundingClientRect();
                        o = b.clientX - s.left, p = b.clientY - s.top
                    }
                    return b.deltaX = l, b.deltaY = m, b.deltaFactor = f, b.offsetX = o, b.offsetY = p, b.deltaMode = 0, h.unshift(b, j, l, m), e && clearTimeout(e), e = setTimeout(c, 200), (a.event.dispatch || a.event.handle).apply(this, h)
                }
            }

            function c() {
                f = null
            }

            function d(a, b) {
                return k.settings.adjustOldDeltas && "mousewheel" === a.type && b % 120 === 0
            }
            var e, f, g = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
                h = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
                i = Array.prototype.slice;
            if (a.event.fixHooks)
                for (var j = g.length; j;) a.event.fixHooks[g[--j]] = a.event.mouseHooks;
            var k = a.event.special.mousewheel = {
                version: "3.1.12",
                setup: function() {
                    if (this.addEventListener)
                        for (var c = h.length; c;) this.addEventListener(h[--c], b, !1);
                    else this.onmousewheel = b;
                    a.data(this, "mousewheel-line-height", k.getLineHeight(this)), a.data(this, "mousewheel-page-height", k.getPageHeight(this))
                },
                teardown: function() {
                    if (this.removeEventListener)
                        for (var c = h.length; c;) this.removeEventListener(h[--c], b, !1);
                    else this.onmousewheel = null;
                    a.removeData(this, "mousewheel-line-height"), a.removeData(this, "mousewheel-page-height")
                },
                getLineHeight: function(b) {
                    var c = a(b),
                        d = c["offsetParent" in a.fn ? "offsetParent" : "parent"]();
                    return d.length || (d = a("body")), parseInt(d.css("fontSize"), 10) || parseInt(c.css("fontSize"), 10) || 16
                },
                getPageHeight: function(b) {
                    return a(b).height()
                },
                settings: {
                    adjustOldDeltas: !0,
                    normalizeOffset: !0
                }
            };
            a.fn.extend({
                mousewheel: function(a) {
                    return a ? this.bind("mousewheel", a) : this.trigger("mousewheel")
                },
                unmousewheel: function(a) {
                    return this.unbind("mousewheel", a)
                }
            })
        });
    </script>
    <script>
        $(function() {
            var activeSection;
            // set the section 
            function setSection(id) {
                if (activeSection != id) {
                    // if a section is active hide it
                    if (activeSection >= 0) {
                        // trigger section hide
                        hideSection(activeSection);
                    }
                    // set the variable to the new id
                    activeSection = id;

                    // trigger animation
                    showSection(activeSection);

                    // set the active nav
                    setActiveNav(activeSection);

                    // reset the sliders
                    resetSlider(activeSection);
                }
            }

            function hideSection(id) {
                var el = $(".split-template article").eq(id);

                // set classes from the active containers
                el.find(".text-container").removeClass("animateIn").addClass("animateOut");
                el.find(".photo-container").removeClass("animateIn").addClass("animateOut");
                el.find(".cdiv").removeClass("animateIn").removeClass("doAnimate");

                // reset the position of the element when off screen
                setTimeout(function() {
                    $(".animateOut").removeClass("animateOut");
                }, 500);
            }

            function showSection(id) {
                var el = $(".split-template article").eq(id);
                // add classes to trigger animation
                el.find(".text-container").addClass("animateIn");
                el.find(".photo-container").addClass("animateIn");
                el.find(".cdiv").addClass("doAnimate");
            }

            function resetSlider(id) {
                $(".caro").slick("slickPause");
                $(".split-template article").eq(id).find(".caro").slick("slickPlay");
            }

            function setActiveNav(id) {
                $(".split-template nav ul li").removeClass("active").eq(id).addClass("active");
            }

            function nextSection() {
                activeSection < $(".split-template article").length - 1 ?
                    setSection(activeSection + 1) :
                    setSection(0);
            }

            function prevSection() {
                activeSection > 0 ?
                    setSection(activeSection - 1) :
                    setSection($(".split-template article").length - 1);
            }

            function checkWheel(event) {
                console.log("wheel");
                console.log(event.deltaY * event.deltaFactor);
                if ($(".animateOut").length > 0) {
                    return false;
                } else {
                    var dd = event.deltaY * event.deltaFactor;
                    if (dd >= 20) {
                        prevSection()
                    } else if (dd <= -20) {
                        nextSection()
                    }
                }
            }

            function node(type, obj, content) {
                if (!type) return "";
                var node = $("<" + type + "/>", obj);
                if (content) node.append(content);
                return node;
            }

            function buildNav() {
                $("article").each(function(index) {
                    $("nav ul").append(
                        node("li").append(
                            node("div", {
                                class: "circle"
                            }, (index + 1))
                        )
                    );
                });
                $("nav ul li").on("click", function() {
                    setSection($(this).index());
                });
            }

            function initSliders() {
                $('.caro').slick({
                    arrows: false,
                    dots: true,
                    autoplay: true,
                    autoplaySpeed: 6000
                });
            }

            function init() {
                // list for the wheel scroll
                $('main').on('mousewheel', checkWheel);
                // build nav based on sections
                buildNav();
                // initi slick sliders
                initSliders();
                // show the first section
                setSection(0);
            }
            init();
        });
    </script>
</body>

</html>